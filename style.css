:root {
    --sidebar-width: 280px;
    --header-height: 70px;
    --color-primary: #0284c7; 
    --color-accent: #f59e0b; 
    --color-dark: #0c4a6e; 
    --bg-color: #f8fafc; 
    --card-bg: #ffffff;
    --text-color: #334155;
    --code-bg: #1e1e1e;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    margin: 0; display: flex; flex-direction: column;
}

/* --- FIXED HEADER --- */
#main-header {
    height: var(--header-height);
    background-color: var(--color-dark);
    color: white;
    display: flex;
    align-items: center;
    padding: 0 20px;
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 1100;
    border-bottom: 4px solid var(--color-accent);
}

.header-title {
    flex: 1;
    text-align: center;
    margin: 0;
    text-transform: uppercase;
    font-weight: 900;
    font-size: 1.5rem;
    letter-spacing: 2px;
    color: #fbbf24;
}

.toggle-btn {
    background: var(--color-accent);
    border: none;
    padding: 10px 15px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    color: #000;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: 0.2s;
}

/* --- LAYOUT --- */
.wrapper {
    display: flex;
    margin-top: var(--header-height);
    min-height: calc(100vh - var(--header-height));
}

#sidebar {
    width: var(--sidebar-width);
    background-color: #0f172a;
    color: white;
    transition: all 0.3s ease;
    position: fixed;
    top: var(--header-height);
    bottom: 0;
    overflow-y: auto;
    z-index: 1000;
}

#sidebar.collapsed { margin-left: calc(-1 * var(--sidebar-width)); }

#main-content {
    margin-left: var(--sidebar-width);
    flex: 1;
    padding: 30px;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
}

#main-content.expanded { margin-left: 0; }

/* --- COMPONENTS (Cards, Tables, Code) --- */
.step-card {
    background: var(--card-bg); border-radius: 8px; padding: 25px; margin-bottom: 25px;
    position: relative; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: 1px solid #e2e8f0;
}

.border-blue { border-left: 6px solid #0284c7; }
.border-orange { border-left: 6px solid #eb9903; }
.border-green { border-left: 6px solid #29c702; }
.border-red { border-left: 6px solid #c70202; }
.border-yellow { border-left: 6px solid #dfdb06; }
.border-purple { border-left: 6px solid #cd06df; }

.step-badge {
    position: absolute; top: -14px; left: 20px; color: white;
    padding: 4px 16px; border-radius: 20px; font-weight: bold; font-size: 0.8rem;
    text-transform: uppercase;
}

.bg-blue { background-color: #0284c7; }
.bg-orange { background-color: #eb9903; }
.bg-green { background-color: #29c702; }
.bg-red { background-color: #c70202; }
.bg-yellow { background-color: #dfdb06; }
.bg-purple { background-color: #cd06df; }

/* --- ĐỊNH DẠNG GHI CHÚ QUAN TRỌNG (IMPORTANT NOTE) --- */
.important-note {
    background-color: #fffbeb; /* Nền vàng nhạt nhẹ nhàng */
    border-left: 6px solid #f59e0b; /* Viền cam vàng đặc trưng */
    padding: 15px 20px;
    margin: 20px 0;
    border-radius: 4px 12px 12px 4px;
    color: #92400e; /* Màu chữ nâu đậm dễ đọc */
    font-size: 0.95rem;
    line-height: 1.6;
    position: relative;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.1); /* Đổ bóng nhẹ cùng tông màu viền */
}

/* Thêm biểu tượng bóng đèn phía trước tiêu đề */
.important-note b:first-child::before {
    margin-right: 8px;
    filter: drop-shadow(0 0 2px rgba(245, 158, 11, 0.5));
}

/* Định dạng các đoạn code inline bên trong ghi chú quan trọng */
.important-note code, .important-note .inline-code {
    background-color: #fef3c7 !important; /* Nền đậm hơn một chút so với khung note */
    color: #b45309 !important; /* Chữ màu hổ phách */
    border: 1px solid #fcd34d !important;
}

.garden-table { border-collapse: collapse; margin: 20px auto; }
.garden-table td { border: 1px solid #cbd5e1; width: 60px; height: 40px; text-align: center; }
.val-cell { background-color: #fef08a; font-weight: bold; color: #0c4a6e;}
.idx-row { background: #f1f5f9; font-weight: bold; color: #64748b; }

.math-formula {
    background-color: #f0f9ff; padding: 15px; border-radius: 8px;
    text-align: center; font-size: 1.2em; color: var(--color-dark); 
    border: 1px dashed var(--color-primary); margin: 15px 0;
}

/* --- TÙY CHỈNH HIGHLIGHT.JS CHUẨN VS CODE --- */

/* Định dạng code trên cùng dòng văn bản */
#main-content p code, 
#main-content li code,
.inline-code {
    background-color: #edf6f7 !important; /* Nền xanh nhạt */
    color: #03197c !important;           /* Màu xanh đậm cho chữ */
    padding: 2px 5px !important;
    margin: 0 2px !important;
    font-family: 'Consolas', 'Monaco', monospace !important;
    font-size: 0.9em !important;
    border-radius: 4px !important;
    border: 1px solid #d1e9eb !important;
    display: inline-block !important;    /* Giúp padding hiển thị chuẩn hơn */
    line-height: 1.4 !important;
}

/* 1. Khung nền và font chữ chung */
pre code.hljs {
    display: block;
    overflow-x: auto;
    padding: 1.5em;
    background: #1e1e1e !important; /* Màu nền tối chuẩn VS Code */
    color: #d4d4d4; /* Màu chữ mặc định (trắng xám) */
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.5;
    border-radius: 8px;
    border: 1px solid #3e4451;
}

/* Tên hàm: Vàng nhạt */
.hljs-title.function_, 
.hljs-title.function_.invocation {
    color: #dcdcaa !important; 
    font-weight: bold !important;
}

/* Tên biến & Tham số: Xanh lơ */
.hljs-variable {
    color: #9cdcfe !important;
    font-weight: normal !important;
}

/* 4. Toán tử và Dấu ngăn cách (Ví dụ: +, -, =, <, >, ;, ,) */
.hljs-operator, 
.hljs-punctuation, 
.hljs-subst {
    color: #eea41a !important; /* Màu trắng xám để không bị rối */
}

/* 5. Từ khóa điều hướng (Ví dụ: int, double, if, else, return) */
.hljs-keyword {
    color: #5ee727 !important;
    font-weight: bold !important;
}

.hljs-type {
    color: #e94eee !important;
    font-weight: bold !important;
}

/* 7. Xâu ký tự (Ví dụ: "Hello") */
.hljs-string {
    color: #fbff00 !important; /* Cam đỏ nhạt */
}

/* 8. Số (Ví dụ: 2024, 3.14) */
.hljs-number {
    color: #f55e5e !important; /* Xanh lá mạ nhạt */
}

/* 9. Ghi chú (Sáng rõ hơn theo yêu cầu của Thầy) */
.hljs-comment {
    color: #6a9955 !important; /* Xanh lá đậm nhưng đủ sáng */
    font-style: italic;
}

/* 10. Các đối tượng built-in (Ví dụ: cin, cout, endl, vector) */
.hljs-built_in {
    color: #5ee727 !important; /* Xanh ngọc */
    font-weight: bold;
}

/* --- TỔNG HỢP CSS MENU ĐA CẤP --- */

/* 1. Danh mục chính (Vd: 1. CẤU TRÚC DỮ LIỆU, 2. KIẾN THỨC TOÁN) */
.menu-category {
    padding: 15px 20px; 
    font-size: 0.85rem; 
    text-transform: uppercase;
    color: #94a3b8; 
    font-weight: bold; 
    background: #1e293b;
    display: flex; 
    justify-content: space-between; 
    cursor: pointer;
    border-bottom: 1px solid #334155;
    transition: background 0.3s;
}

.menu-category:hover {
    background: #243146; /* Sáng lên một chút khi hover danh mục lớn */
}

/* 2. Menu con cấp 1 (Vd: Array, String, Số học) */
.menu-item, .menu-item-parent {
    padding: 12px 25px; 
    display: flex; 
    justify-content: space-between;
    align-items: center;
    color: #e2e8f0;
    text-decoration: none; 
    font-size: 0.95rem; 
    border-left: 4px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease;
}

/* 3. Hiệu ứng Hover và Active chung cho tất cả Menu */
.menu-item:hover, .menu-item.active, .menu-item-parent:hover {
    background: #334155; 
    color: var(--color-accent); 
    border-left: 4px solid var(--color-accent);
}

/* 4. Vùng chứa menu con (Submenu) */
.submenu {
    background: #0f172a; /* Nền tối đồng bộ với sidebar */
}

/* Ẩn hiện menu */
.submenu.hidden { 
    display: none; 
}

/* Đảm bảo mục 2.1 Số học có kiểu dáng giống hệt các mục 2.2, 2.3 */
.menu-item-flat {
    padding: 12px 25px;
    display: block;
    color: #e2e8f0; /* Màu chữ trắng xám chuẩn menu-item */
    text-decoration: none;
    font-size: 0.95rem;
    border-left: 4px solid transparent;
    transition: all 0.2s ease;
    cursor: pointer;
}

/* Hiệu ứng hover đồng bộ với toàn bộ hệ thống */
.menu-item-flat:hover, .menu-item-flat.active {
    background: #334155;
    color: var(--color-accent);
    border-left: 4px solid var(--color-accent);
}

/* Loại bỏ màu nền tối của submenu nếu Thầy muốn nó trông phẳng hoàn toàn */
.menu-flat-container {
    background: transparent !important;
}

/* Menu con cấp 3 (Các bài 2.1.1, 2.1.2...) */
.submenu-level-3 .menu-item {
    padding-left: 55px !important; /* Thụt vào sâu hơn các mục 2.2, 2.3 */
    font-size: 0.85rem; /* Chữ nhỏ hơn một chút để tạo cảm giác phân cấp */
    background-color: #0f172a; /* Nền tối đồng bộ */
    border-left: 4px solid transparent;
}

/* Hiệu ứng hover riêng cho cấp 3 */
.submenu-level-3 .menu-item:hover {
    background-color: #1e293b !important;
    color: var(--color-accent) !important;
}

.math-formula {
    background-color: #f0f9ff; padding: 15px; border-radius: 8px;
    text-align: center; font-size: 1.2em; color: var(--color-dark); 
    border: 1px dashed var(--color-primary); margin: 15px 0;
}

/* --- FOOTER --- */
.teacher-footer {
            background-color: var(--color-dark); color: #cffafe; padding: 5px 5px;
            margin-top: 5px; border-top: 5px solid var(--color-accent); text-align: center;
            border-radius: 0 0 16px 16px;
        }
.footer-title { font-size: 1rem; font-weight: 900; margin-bottom: 10px; letter-spacing: 1px; color: var(--color-accent); }
.footer-info { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; font-size: 1rem; }
.footer-item { display: flex; align-items: center; gap: 10px; color: #cffafe; text-decoration: none; transition: all 0.3s ease; padding: 5px 10px; border-radius: 8px;}
.footer-item:hover { background-color: rgba(255, 255, 255, 0.1); color: #fff; transform: translateY(-2px); }